<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>라이브러리</title>
    <link rel="stylesheet" href="../css/library.css">
    <script>
        function loadHTML(file)
        {
            var rawFile = new XMLHttpRequest();
            rawFile.open("GET", file, false);
            rawFile.onreadystatechange = function ()
            {
                if(rawFile.readyState === 4)
                {
                    if(rawFile.status === 200 || rawFile.status == 0)
                    {
                        var allText = rawFile.responseText;
                        document.write(allText);
                    }
                }
            }
            rawFile.send(null);
        }
    </script>
</head>
<body>

    <!-- 상단 네비게이션 -->
    <header>
        <script>loadHTML("./header.html")</script>
    </header>

    <!-- 메인 컨텐츠 -->
    <div class="main-container">
        <!-- 게임 목록 -->
        <aside class="game-list">
            <ul>
                <li onclick="showGameDetails('A Dance of Fire and Ice')">
                    <img src="../assets/images/A_DANCE_OF.jpg" alt="게임 이미지"> 불과 얼음의 춤
                </li>
                <li onclick="showGameDetails('Harry Potter')">
                    <img src="../assets/images/hogwarts.jpg" alt="게임 이미지"> 해리 포터: 퀴디치 챔피언
                </li>
                <!-- 추가 게임 목록 -->
            </ul>
        </aside>

        <!-- 라이브러리 개요 -->
        <section class="library-overview" id="library-overview">
            <h2>새로운 업데이트</h2>
            <div class="update">
                <img src="../assets/images/update.png" alt="업데이트 이미지">
                <p>새로운 업데이트: Quidditch Champions 출시!</p>
            </div>
            <h2>최근 게임</h2>
            <div class="recent-game">
                <img src="../assets/images/recent_game.png" alt="최근 게임 이미지">
                <p>One-armed Cook</p>
            </div>
        </section>

        <!-- 게임 세부 정보 -->
        <section class="game-details" id="game-details">
            <div class="game-header">
                <img src="../assets/images/A_DANCE_OF.jpg" alt="게임 배너" class="game-banner"> 

                <h1>A Dance of Fire and Ice</h1>
                <button class="install-btn">설치</button>
                <p>필요한 공간: 1.39GB | 마지막 플레이: 3월 28일 | 플레이 시간: 3.3시간</p>
                <p>도전 과제: 6/47</p>
            </div>

            <br>

            <div class="tabs">
                <button>상점 페이지</button>
                <button>DLC</button>
                <button>커뮤니티 허브</button>
                <button>토론</button>
                <button>가이드</button>
                <button>창작마당</button>
                <button>지원</button>
            </div>
            <div class="activity">
                <h2>활동</h2>
                <p>친구들에게 이 게임에 대해 이야기해 주세요...</p>
                <div class="update">
                    <h3>주요 업데이트</h3>
                    <p>새로운 엑스트라 세계: Party of Spirits!</p>
                </div>
            </div>
            <div class="friend-activity">
                <h3>플레이한 친구들</h3>
                <p>친구 1명이 이전에 플레이했습니다</p>
                <img src="../assets/images/friend.png" alt="친구 이미지">
            </div>
        </section>
    </div>

    <script>
        // 처음 화면에서 라이브러리 개요를 보여주고 게임 세부 정보는 숨김
        document.getElementById('game-details').style.display = 'none';

        // 게임 데이터를 정의합니다.
        const games = {
            "A Dance of Fire and Ice": {
                title: "A Dance of Fire and Ice",
                image: "../assets/images/A_DANCE_OF.jpg", // 이미지 경로 확인
                space: "1.39GB",
                lastPlayed: "3월 28일",
                playtime: "3.3시간",
                achievements: "6/47",
                updateText: "새로운 엑스트라 세계: Party of Spirits!",
                friendText: "친구 1명이 이전에 플레이했습니다",
                friendImage: "../assets/images/friend.png"
            },
            "Harry Potter": {
                title: "Harry Potter: Quidditch Champions",
                image: "../assets/images/hogwarts.jpg",
                space: "2.5GB",
                lastPlayed: "4월 10일",
                playtime: "10시간",
                achievements: "20/50",
                updateText: "퀴디치 챔피언에서 새로운 마법의 세계를 경험하세요!",
                friendText: "친구 2명이 이전에 플레이했습니다",
                friendImage: "../assets/images/friend2.png"
            }
        };

        // 게임 목록에서 게임을 클릭했을 때 실행되는 함수
        function showGameDetails(gameKey) {
            const game = games[gameKey];

            // 라이브러리 개요를 숨기고 게임 세부 정보를 표시
            document.getElementById('library-overview').style.display = 'none';
            document.getElementById('game-details').style.display = 'block';

            // 이미지 업데이트
            const gameImage = document.querySelector('.game-header img');
            gameImage.src = game.image;

            // 이미지가 완전히 로드되었는지 확인
            gameImage.onload = function() {
                console.log('이미지가 성공적으로 로드되었습니다.');
            };
            gameImage.onerror = function() {
                console.error('이미지 로드에 실패했습니다.');
            };

            // 게임 정보를 업데이트
            document.querySelector('.game-header h1').textContent = game.title;
            document.querySelector('.game-header p:nth-of-type(1)').textContent = `필요한 공간: ${game.space} | 마지막 플레이: ${game.lastPlayed} | 플레이 시간: ${game.playtime}`;
            document.querySelector('.game-header p:nth-of-type(2)').textContent = `도전 과제: ${game.achievements}`;
            document.querySelector('.update p').textContent = game.updateText;
            document.querySelector('.friend-activity p').textContent = game.friendText;
            document.querySelector('.friend-activity img').src = game.friendImage;
        }
    </script>

</body>
</html>
