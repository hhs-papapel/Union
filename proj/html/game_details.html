<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shogun Showdown - 게임 상세 페이지</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/game_details_style.css"> <!-- 외부 스타일시트 -->
    <script>
        function loadHTML(file)
        {
            var rawFile = new XMLHttpRequest();
            rawFile.open("GET", file, false);
            rawFile.onreadystatechange = function ()
            {
                if(rawFile.readyState === 4)
                {
                    if(rawFile.status === 200 || rawFile.status == 0)
                    {
                        var allText = rawFile.responseText;
                        document.write(allText);
                    }
                }
            }
            rawFile.send(null);
        }
    </script>
</head>
<body>

    <!-- 헤더 영역 -->
    <header>
        <script>loadHTML("./header.html")</script>
    </header>

    <!-- 사이드바 -->
    <div id="mySidebar" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a> <!-- 사이드바 닫기 버튼 -->
        <a href="#">홈</a>
        <a href="#">소개</a>
        <a href="#">서비스</a>
        <a href="#">연락처</a>
    </div>

    <!-- 메인 콘텐츠 -->
    <main>
        <section class="game-detail">
            <div class="container">
                <!-- 왼쪽 게임 이미지 및 비디오 -->
                <div class="game-media">
                    <div id="media-display">
                        <video id="main-video" controls autoplay>
                            <source src="../assets/movie/shogun_movie.webm" type="video/webm">
                            Your browser does not support the video tag.
                        </video>
                    </div>
                    <div class="media-thumbnails">
                        <img src="../assets/images/shogun_Showdown2.jpg" alt="비디오 썸네일" onclick="showVideo('../assets/movie/shogun_movie.webm')">
                        <img src="../assets/images/shogun_Showdown.jpg" alt="스크린샷 1" onclick="showImage('../assets/images/shogun_Showdown.jpg')">
                        <img src="../assets/images/shogun_Showdown3.jpg" alt="스크린샷 2" onclick="showImage('../assets/images/shogun_Showdown3.jpg')">
                        <img src="../assets/images/shogun_Showdown4.jpg" alt="스크린샷 3" onclick="showImage('../assets/images/shogun_Showdown4.jpg')">
                    </div>

                    <!-- 구매, 찜, 장바구니, 커뮤니티 버튼 -->
                    <div class="buy-options">
                        <a href="payment.html" class="buy-btn">구매하기 ₩19,800</a>
                        <button class="wishlist-btn"><i class="fas fa-heart"></i> 찜</button>
                        <button class="cart-btn"><i class="fas fa-shopping-cart"></i> 장바구니</button>
                        <button class="community-btn"><i class="fas fa-users"></i> 커뮤니티</button>
                    </div>
                </div>

                <!-- 오른쪽 게임 정보 -->
                <div class="game-info">
                    <h1>Shogun Showdown</h1>
                    <p>Shogun Showdown은 로그라이크 및 턴 기반 전투가 특징인 게임입니다. 전략적인 전투와 타일을 업그레이드하고 적들과 싸우세요!</p>
                    <ul>
                        <li>출시일: 2024년 9월 6일</li>
                        <li>개발사: Robotaino</li>
                        <li>배급사: Goblinz Publishing</li>
                        <li>장르: 턴제 RPG, 로그라이크, 2D</li>
                    </ul>
                    <div class="tags">
                        <span>턴제 RPG</span>
                        <span>로그라이크</span>
                        <span>전략</span>
                        <span>2D</span>
                    </div>
                    <br>
                    <h2>₩19,800</h2>
                </div>
            </div>
        </section>

        <!-- 리뷰 작성 섹션 -->
        <section class="review-section">
            <div class="container">
                <div class="review-form">
                    <img src="../assets/images/user_avatar.png" alt="유저 아바타" class="user-avatar">
                    <textarea id="user-review" placeholder="이 게임에 대한 리뷰를 작성하세요…"></textarea>
                    <button class="post-review-btn">리뷰 게시</button>
                </div>
            </div>
        </section>
    </main>

    <!-- 푸터 영역 -->
    <footer>
        <div class="container">
            <p>&copy; 2024 게임 스토어. 모든 권리 보유.</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        function showImage(imageSrc) {
            var mediaDisplay = document.getElementById('media-display');
            mediaDisplay.innerHTML = '<img src="' + imageSrc + '" alt="이미지" class="media-thumbnail">';
        }

        function showVideo(videoSrc) {
            var mediaDisplay = document.getElementById('media-display');
            mediaDisplay.innerHTML = '<video id="main-video" controls autoplay><source src="' + videoSrc + '" type="video/webm">Your browser does not support the video tag.</video>';
        }

        // 페이지 로드 시 비디오 자동 재생
        window.onload = function() {
            var video = document.getElementById('main-video');
            if (video) {
                video.play();
            }
        };

        // 사이드바 열기
        function openNav() {
            document.getElementById("mySidebar").style.width = "250px";
        }

        // 사이드바 닫기
        function closeNav() {
            document.getElementById("mySidebar").style.width = "0";
        }

        // 검색창 토글
        const searchIcon = document.querySelector('.search-icon');
        const searchInput = document.querySelector('.search-input');

        searchIcon.addEventListener('click', () => {
            searchInput.classList.toggle('active');
            searchInput.focus();
        });

        // 리뷰 게시 버튼 클릭 시 리뷰를 추가하는 기능
        document.querySelector('.post-review-btn').addEventListener('click', function() {
            var reviewText = document.getElementById('user-review').value;
            if (reviewText) {
                var newReview = `
                    <div class="review-item">
                        <img src="../assets/images/user_avatar.png" alt="리뷰 유저 아바타" class="user-avatar">
                        <div class="review-content">
                            <p><strong>유저:</strong> ${reviewText}</p>
                        </div>
                    </div>
                `;
                document.querySelector('.review-section').insertAdjacentHTML('beforeend', newReview);
                document.getElementById('user-review').value = ''; // 텍스트 초기화
            } else {
                alert('리뷰를 작성하세요!');
            }
        });

    </script>

</body>
</html>
